# 热部署调研报告







##  一、项目背景







热部署是指让应用能够在无需重新安装的情况实现更新，帮助应用快速建立动态修改能力,用户总是希望服务进程能保持稳定。如果可以 7*24 小时的工作，那就永远不要重启它。但是，软件、产品的功能总是在不断的丰富，只要仍在生命周期以内，就不可避免会面临版本升级的问题，产品运营能力的提升，也都是靠版本更新迭代来实现，热部署更是被视为整个产品精细化运营的基础，而又如果发生大规模的宕机或者运行大型程序时出现问题，通过热部署可以尽最大可能的减少损失并快速修补，而不用重新启动，对于APP等应用，热部署可以能够缩短用户取得新版客户端的流程，改善用户体验，省去用户自行更新客户端的步骤。总而言之，如果更新过程中，业务进程不用重启，那么，将会极大地方便我们的生产、生活，升级将不再是一个令人烦恼的事情了。







## 二、立项依据




### 1. 热部署技术的应用场景




#### （1）轻量而快速的升级













热部署技术可以理解为一个动态修改代码与资源的通道，它适合于修改量较少的情况。以微信的多次发布为例，补丁大小均在300K以内，它相对于传统的发布有着很大的优势。













[![img](https://github.com/WeMobileDev/article/raw/master/assets/tinker/data.png)](https://github.com/WeMobileDev/article/blob/master/assets/tinker/data.png)




####  （2）在不宕机的情况下更新应用













在某些应用场景中，生产环境宕机会造成非常严重的后果。













比如，2012年12月22日，全球知名的开源托管服务GitHub意外遭遇了历史上最严重的一次宕机事件，而GitHub官方确认了本次宕机是在例行的软件升级过程中发生的。众所周知，GitHub一旦宕机，会使得全球各地近 2400 万名开发者的协作开发被迫中断，如果发生了代码库丢失等事故，造成的后果更是不堪设想。







~~本小组计划在源代码已知的条件下，为正在运行的程序（二进制代码）制作二进制快照，修改其程序逻辑，然后在程序各种状态不变的情况下执行修改过的新的代码。~~













##  三、重要性以及前瞻性分析










热部署是关联性强，实用性高并能显著提升各程序执行效率和开发效率的战略性技术，从谷歌微软中的大型服务器，到各类游戏厂商和手机APP的更新下载，再到我们生活中的日常使用，总会有功能不够完善需要升级，或者是犯错想要修改的时候，而如果此时程序正在运行，重启更新代价又过高，这就是热部署发挥功效的时候，比如游戏市场中，刚出的产品，在众多怀着热情的玩家疯狂的点击下载以及登陆畅玩之时，出现了bug肯定是在所难免的，如果你的游戏不支持热更新技术，那么关服是迟早的事情，为了不影响玩家体验，又能保证服务器稳定运行的情况下，修复一些轻微bug，使用热更新之最好不过的了，对用户来说能获得更好服务体验，对开发者开发时也能够适应上线需求，节省时间。再比如时常能从新闻上看到的大型服务器的宕机，对这些大公司来说，每一秒都是成千上万的损失，而更甚的是用户隐私的泄漏和公司信誉的破产，而在这种情况热部署的实现并迅速修改显得尤为重要。
热部署这一强有力的技术已经在不知不觉间影响着我们的生活，并发挥着不可或缺的作用，虽然谷歌微软等巨头都在不断地改进，但仍存在着他们力所不能及的一些有市场，有价值的需求和亟待解决的问题，而我们要做的就是在操作系统层面提供动态链接的支持来给程序提供一个通用的热部署的框架，已经支持热部署的更新很简单，但我们的重点是给开发时不支持热部署的程序提供热更新，而这是现在所做不到的。


##  四、相关工作













##  五、参考文献













[1]: https://www.ibm.com/developerworks/cn/linux/l-cn-prcss-hotupgrd/	"Linux 进程热升级"